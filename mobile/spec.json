{"openapi":"3.1.0","info":{"title":"Between API - Silence Module","description":"REST API for the Between platform's Silence module. Allows users to consciously log periods of silence in their daily lives.","contact":{"name":"Between Team","email":"support@between.app"},"license":{"name":"MIT"},"version":"1.0.0"},"paths":{"/api/auth/login":{"post":{"tags":["Authentication"],"summary":"Login user","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Login successful","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JsonResponse_LoginResponse"}}}},"400":{"description":"Validation error"},"401":{"description":"Invalid credentials"}}}},"/api/auth/refresh-token":{"post":{"tags":["Authentication"],"summary":"Refresh access token","operationId":"refresh_token","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenRequest"}}},"required":true},"responses":{"200":{"description":"Token refreshed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JsonResponse_TokenResponse"}}}},"400":{"description":"Validation error"},"401":{"description":"Invalid refresh token"}}}},"/api/auth/register":{"post":{"tags":["Authentication"],"summary":"Register a new user","operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"201":{"description":"User registered successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JsonResponse_RegisterResponse"}}}},"400":{"description":"Validation error"},"409":{"description":"User already exists"}}}},"/api/silence/contexts":{"get":{"tags":["Silence"],"summary":"Get available silence contexts","operationId":"get_contexts","responses":{"200":{"description":"Context list retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JsonResponse_ContextListResponse"}}}},"401":{"description":"Unauthorized"}},"security":[{"bearer_auth":[]}]}},"/api/silence/end":{"post":{"tags":["Silence"],"summary":"End the active silence session","operationId":"end_session","responses":{"200":{"description":"Silence session ended successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JsonResponse_EndSessionResponse"}}}},"401":{"description":"Unauthorized"},"404":{"description":"No active session found"}},"security":[{"bearer_auth":[]}]}},"/api/silence/sessions":{"get":{"tags":["Silence"],"summary":"Get user's session history with pagination","operationId":"get_sessions","parameters":[{"name":"page","in":"query","description":"Page number (default: 1)","required":false,"schema":{"type":"integer","format":"int32","minimum":0}},{"name":"limit","in":"query","description":"Items per page (default: 20)","required":false,"schema":{"type":"integer","format":"int32","minimum":0}},{"name":"from_date","in":"query","description":"Filter sessions from date (ISO 8601)","required":false,"schema":{"type":"string"}},{"name":"to_date","in":"query","description":"Filter sessions to date (ISO 8601)","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"Session list retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JsonResponse_SessionListResponse"}}}},"401":{"description":"Unauthorized"}},"security":[{"bearer_auth":[]}]}},"/api/silence/sessions/{session_id}/context":{"put":{"tags":["Silence"],"summary":"Attach context to a completed session","operationId":"attach_context","parameters":[{"name":"session_id","in":"path","description":"Session ID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AttachContextRequest"}}},"required":true},"responses":{"200":{"description":"Context attached successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JsonResponse_AttachContextResponse"}}}},"400":{"description":"Validation error"},"401":{"description":"Unauthorized"},"404":{"description":"Session not found"}},"security":[{"bearer_auth":[]}]}},"/api/silence/start":{"post":{"tags":["Silence"],"summary":"Start a new silence session","operationId":"start_session","responses":{"201":{"description":"Silence session started successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JsonResponse_StartSessionResponse"}}}},"401":{"description":"Unauthorized"},"409":{"description":"Active session already exists"}},"security":[{"bearer_auth":[]}]}},"/api/silence/stats":{"get":{"tags":["Silence"],"summary":"Get session statistics","operationId":"get_stats","responses":{"200":{"description":"Statistics retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JsonResponse_SessionStatsResponse"}}}},"401":{"description":"Unauthorized"}},"security":[{"bearer_auth":[]}]}},"/health":{"get":{"tags":["Health"],"summary":"Health check endpoint","description":"Returns the health status of the application and its dependencies.","operationId":"health_check","responses":{"200":{"description":"Service is healthy","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JsonResponse_HealthData"}}}},"503":{"description":"Service is unhealthy","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JsonResponse_HealthData"}}}}}}}},"components":{"schemas":{"AttachContextRequest":{"type":"object","description":"Attach context request","required":["context_code"],"properties":{"context_code":{"type":"integer","format":"int32"},"context_note":{"type":["string","null"]}}},"AttachContextResponse":{"type":"object","description":"Attach context response","required":["context_code","context_label"],"properties":{"context_code":{"type":"integer","format":"int32"},"context_label":{"type":"string"},"context_note":{"type":["string","null"]}}},"ContextCount":{"type":"object","required":["code","label","count"],"properties":{"code":{"type":"integer","format":"int32"},"count":{"type":"integer","format":"int64"},"label":{"type":"string"}}},"ContextItem":{"type":"object","description":"Context item","required":["code","label"],"properties":{"code":{"type":"integer","format":"int32"},"label":{"type":"string"}}},"ContextListResponse":{"type":"object","description":"Context list response","required":["contexts"],"properties":{"contexts":{"type":"array","items":{"$ref":"#/components/schemas/ContextItem"}}}},"DayCount":{"type":"object","required":["day","count"],"properties":{"count":{"type":"integer","format":"int64"},"day":{"type":"string"}}},"EndSessionResponse":{"type":"object","description":"End session response","required":["id","user_id","started_at","started_at_local","ended_at","ended_at_local","duration_seconds","status"],"properties":{"duration_seconds":{"type":"integer","format":"int32"},"ended_at":{"type":"string","format":"date-time"},"ended_at_local":{"type":"string"},"id":{"type":"string","format":"uuid"},"started_at":{"type":"string","format":"date-time"},"started_at_local":{"type":"string"},"status":{"type":"string"},"user_id":{"type":"string","format":"uuid"}}},"HealthData":{"type":"object","required":["postgres"],"properties":{"postgres":{"type":"boolean"}}},"HourCount":{"type":"object","required":["hour","count"],"properties":{"count":{"type":"integer","format":"int64"},"hour":{"type":"integer","format":"int32"}}},"JsonResponse_AttachContextResponse":{"type":"object","required":["success","status_code","timestamp"],"properties":{"data":{"type":"object","description":"Attach context response","required":["context_code","context_label"],"properties":{"context_code":{"type":"integer","format":"int32"},"context_label":{"type":"string"},"context_note":{"type":["string","null"]}}},"error_code":{"type":["string","null"]},"message":{"type":["string","null"]},"meta":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/MetaResponse"}]},"status_code":{"type":"integer","format":"int32","minimum":0},"success":{"type":"boolean"},"timestamp":{"type":"string","format":"date-time"}}},"JsonResponse_ContextListResponse":{"type":"object","required":["success","status_code","timestamp"],"properties":{"data":{"type":"object","description":"Context list response","required":["contexts"],"properties":{"contexts":{"type":"array","items":{"$ref":"#/components/schemas/ContextItem"}}}},"error_code":{"type":["string","null"]},"message":{"type":["string","null"]},"meta":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/MetaResponse"}]},"status_code":{"type":"integer","format":"int32","minimum":0},"success":{"type":"boolean"},"timestamp":{"type":"string","format":"date-time"}}},"JsonResponse_EndSessionResponse":{"type":"object","required":["success","status_code","timestamp"],"properties":{"data":{"type":"object","description":"End session response","required":["id","user_id","started_at","started_at_local","ended_at","ended_at_local","duration_seconds","status"],"properties":{"duration_seconds":{"type":"integer","format":"int32"},"ended_at":{"type":"string","format":"date-time"},"ended_at_local":{"type":"string"},"id":{"type":"string","format":"uuid"},"started_at":{"type":"string","format":"date-time"},"started_at_local":{"type":"string"},"status":{"type":"string"},"user_id":{"type":"string","format":"uuid"}}},"error_code":{"type":["string","null"]},"message":{"type":["string","null"]},"meta":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/MetaResponse"}]},"status_code":{"type":"integer","format":"int32","minimum":0},"success":{"type":"boolean"},"timestamp":{"type":"string","format":"date-time"}}},"JsonResponse_HealthData":{"type":"object","required":["success","status_code","timestamp"],"properties":{"data":{"type":"object","required":["postgres"],"properties":{"postgres":{"type":"boolean"}}},"error_code":{"type":["string","null"]},"message":{"type":["string","null"]},"meta":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/MetaResponse"}]},"status_code":{"type":"integer","format":"int32","minimum":0},"success":{"type":"boolean"},"timestamp":{"type":"string","format":"date-time"}}},"JsonResponse_LoginResponse":{"type":"object","required":["success","status_code","timestamp"],"properties":{"data":{"type":"object","description":"Login response","required":["user","tokens"],"properties":{"tokens":{"$ref":"#/components/schemas/TokenResponse"},"user":{"$ref":"#/components/schemas/UserResponse"}}},"error_code":{"type":["string","null"]},"message":{"type":["string","null"]},"meta":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/MetaResponse"}]},"status_code":{"type":"integer","format":"int32","minimum":0},"success":{"type":"boolean"},"timestamp":{"type":"string","format":"date-time"}}},"JsonResponse_RegisterResponse":{"type":"object","required":["success","status_code","timestamp"],"properties":{"data":{"type":"object","description":"Register response","required":["user","tokens"],"properties":{"tokens":{"$ref":"#/components/schemas/TokenResponse"},"user":{"$ref":"#/components/schemas/UserResponse"}}},"error_code":{"type":["string","null"]},"message":{"type":["string","null"]},"meta":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/MetaResponse"}]},"status_code":{"type":"integer","format":"int32","minimum":0},"success":{"type":"boolean"},"timestamp":{"type":"string","format":"date-time"}}},"JsonResponse_SessionListResponse":{"type":"object","required":["success","status_code","timestamp"],"properties":{"data":{"type":"object","description":"Session list response (data only)","required":["sessions"],"properties":{"sessions":{"type":"array","items":{"$ref":"#/components/schemas/SessionItem"}}}},"error_code":{"type":["string","null"]},"message":{"type":["string","null"]},"meta":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/MetaResponse"}]},"status_code":{"type":"integer","format":"int32","minimum":0},"success":{"type":"boolean"},"timestamp":{"type":"string","format":"date-time"}}},"JsonResponse_SessionStatsResponse":{"type":"object","required":["success","status_code","timestamp"],"properties":{"data":{"type":"object","description":"Session statistics response","required":["total_sessions","total_duration_seconds","average_duration_seconds","longest_session_seconds","shortest_session_seconds","sessions_by_hour","sessions_by_day"],"properties":{"average_duration_seconds":{"type":"integer","format":"int32"},"longest_session_seconds":{"type":"integer","format":"int32"},"most_common_context":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ContextCount"}]},"sessions_by_day":{"type":"array","items":{"$ref":"#/components/schemas/DayCount"}},"sessions_by_hour":{"type":"array","items":{"$ref":"#/components/schemas/HourCount"}},"shortest_session_seconds":{"type":"integer","format":"int32"},"total_duration_seconds":{"type":"integer","format":"int64"},"total_sessions":{"type":"integer","format":"int64","minimum":0}}},"error_code":{"type":["string","null"]},"message":{"type":["string","null"]},"meta":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/MetaResponse"}]},"status_code":{"type":"integer","format":"int32","minimum":0},"success":{"type":"boolean"},"timestamp":{"type":"string","format":"date-time"}}},"JsonResponse_StartSessionResponse":{"type":"object","required":["success","status_code","timestamp"],"properties":{"data":{"type":"object","description":"Start session response","required":["id","user_id","started_at","started_at_local","status"],"properties":{"id":{"type":"string","format":"uuid"},"started_at":{"type":"string","format":"date-time"},"started_at_local":{"type":"string"},"status":{"type":"string"},"user_id":{"type":"string","format":"uuid"}}},"error_code":{"type":["string","null"]},"message":{"type":["string","null"]},"meta":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/MetaResponse"}]},"status_code":{"type":"integer","format":"int32","minimum":0},"success":{"type":"boolean"},"timestamp":{"type":"string","format":"date-time"}}},"JsonResponse_TokenResponse":{"type":"object","required":["success","status_code","timestamp"],"properties":{"data":{"type":"object","description":"Token response","required":["access_token","refresh_token","expires_in"],"properties":{"access_token":{"type":"string"},"expires_in":{"type":"integer","format":"int64"},"refresh_token":{"type":"string"}}},"error_code":{"type":["string","null"]},"message":{"type":["string","null"]},"meta":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/MetaResponse"}]},"status_code":{"type":"integer","format":"int32","minimum":0},"success":{"type":"boolean"},"timestamp":{"type":"string","format":"date-time"}}},"LoginRequest":{"type":"object","description":"Login request","required":["email","password"],"properties":{"email":{"type":"string"},"password":{"type":"string"}}},"LoginResponse":{"type":"object","description":"Login response","required":["user","tokens"],"properties":{"tokens":{"$ref":"#/components/schemas/TokenResponse"},"user":{"$ref":"#/components/schemas/UserResponse"}}},"MetaResponse":{"type":"object","required":["page","limit","total_data","total_pages"],"properties":{"limit":{"type":"integer","format":"int32","minimum":0},"page":{"type":"integer","format":"int32","minimum":0},"total_data":{"type":"integer","format":"int64","minimum":0},"total_pages":{"type":"integer","format":"int32","minimum":0}}},"RefreshTokenRequest":{"type":"object","description":"Refresh token request","required":["refresh_token"],"properties":{"refresh_token":{"type":"string"}}},"RegisterRequest":{"type":"object","description":"Register request","required":["fullname","email","password","timezone"],"properties":{"email":{"type":"string"},"fullname":{"type":"string"},"password":{"type":"string"},"timezone":{"type":"string"}}},"RegisterResponse":{"type":"object","description":"Register response","required":["user","tokens"],"properties":{"tokens":{"$ref":"#/components/schemas/TokenResponse"},"user":{"$ref":"#/components/schemas/UserResponse"}}},"SessionItem":{"type":"object","description":"Session item in list","required":["id","started_at","started_at_local","ended_at","ended_at_local","duration_seconds"],"properties":{"context_code":{"type":["integer","null"],"format":"int32"},"context_label":{"type":["string","null"]},"context_note":{"type":["string","null"]},"duration_seconds":{"type":"integer","format":"int32"},"ended_at":{"type":"string","format":"date-time"},"ended_at_local":{"type":"string"},"id":{"type":"string","format":"uuid"},"started_at":{"type":"string","format":"date-time"},"started_at_local":{"type":"string"}}},"SessionListResponse":{"type":"object","description":"Session list response (data only)","required":["sessions"],"properties":{"sessions":{"type":"array","items":{"$ref":"#/components/schemas/SessionItem"}}}},"SessionStatsResponse":{"type":"object","description":"Session statistics response","required":["total_sessions","total_duration_seconds","average_duration_seconds","longest_session_seconds","shortest_session_seconds","sessions_by_hour","sessions_by_day"],"properties":{"average_duration_seconds":{"type":"integer","format":"int32"},"longest_session_seconds":{"type":"integer","format":"int32"},"most_common_context":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ContextCount"}]},"sessions_by_day":{"type":"array","items":{"$ref":"#/components/schemas/DayCount"}},"sessions_by_hour":{"type":"array","items":{"$ref":"#/components/schemas/HourCount"}},"shortest_session_seconds":{"type":"integer","format":"int32"},"total_duration_seconds":{"type":"integer","format":"int64"},"total_sessions":{"type":"integer","format":"int64","minimum":0}}},"StartSessionResponse":{"type":"object","description":"Start session response","required":["id","user_id","started_at","started_at_local","status"],"properties":{"id":{"type":"string","format":"uuid"},"started_at":{"type":"string","format":"date-time"},"started_at_local":{"type":"string"},"status":{"type":"string"},"user_id":{"type":"string","format":"uuid"}}},"TokenResponse":{"type":"object","description":"Token response","required":["access_token","refresh_token","expires_in"],"properties":{"access_token":{"type":"string"},"expires_in":{"type":"integer","format":"int64"},"refresh_token":{"type":"string"}}},"UserResponse":{"type":"object","description":"User response (without sensitive data)","required":["id","fullname","email","timezone","created_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"email":{"type":"string"},"fullname":{"type":"string"},"id":{"type":"string","format":"uuid"},"timezone":{"type":"string"}}}},"securitySchemes":{"bearer_auth":{"type":"http","scheme":"bearer","bearerFormat":"JWT","description":"Enter your JWT token"}}},"tags":[{"name":"Health","description":"Health check endpoints"},{"name":"Authentication","description":"User authentication and authorization endpoints"},{"name":"Silence","description":"Silence session management endpoints"}]}